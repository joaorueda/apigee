/*
 * Copyright (c) 2007-2013, Marketo, Inc. All rights reserved.
 * Marketo marketing automation web activity tracking script
 * Version: 143 
 */
(function(j){if(!j.MunchkinTracker){var h=j.document,l=h.location,q=encodeURIComponent,o=[],m=function(b,a,c,d){b.attachEvent?b.attachEvent("on"+a,c):b.addEventListener(a,c,d||!1);o.push([b,a,c,d])},M=function(b,a,c,d){b.detachEvent?b.detachEvent("on"+a,c):b.removeEventListener(a,c,d||!1)},e=function(b){return"undefined"!==typeof b&&null!==b},v=function(b,a){return b.className.match(RegExp("(\\s|^)"+a+"(\\s|$)"))},n=function(b){var a=null,c;if(e(b))if(0===b.length)a="";else try{a=decodeURIComponent(b)}catch(d){c=
b.indexOf("?");if(-1!==c)try{a=decodeURIComponent(b.substr(0,c))+b.substr(c)}catch(f){}e(a)||(a=String(b))}return a},w=function(b,a){var c={},d=e(a)?a:"=",f=b.split("&"),g=f.length,i,h,j;for(i=0;i<g;i+=1)h=f[i].split(d),e(h)&&1<h.length&&(j=h.shift(),h=h.join(d),c[n(j)]=n(h));return c},x=function(b){try{var a=h.createElement("a");a.href=b;return w(a.search.substr(1))}catch(c){return null}},y=function(b){var a=null,c=[];if(e(b))for(a in b)b.hasOwnProperty(a)&&"function"!==typeof b[a]&&c.push(q(a)+
"="+q(b[a]));return c.join("&")},z=function(b,a){var c=null;if(e(a)&&e(b))for(c in b)b.hasOwnProperty(c)&&e(a[c])&&(b[c]=a[c])},i={customName:null,notifyPrefix:null,wsInfo:null,altIds:[],visitorToken:null,cookieLifeDays:730,clickTime:350,cookieAnon:!0,mkt_tok:null,domainLevel:null,loadSocial:!1},A=null,k=null,N=navigator.cookieEnabled||h.hasOwnProperty("cookie")&&(0<h.cookie.length||-1<(h.cookie="testcookie=test; max-age=10000").indexOf.call(h.cookie,"testcookie=test;")),t=!1,u=[],B=null,E=function(b,
a,c,d){b=b+a+"&"+y(c)+"&"+y(d);a=new Image(1,1);c=(new Date).getTime();a.src=b;B=c+i.clickTime},F=function(){var b=h.getElementsByName("_mkt_trk"),a=0,c="";e(k)&&(c="id:"+k.id+"&token:"+k.token);for(a=0;a<b.length;a+=1)"hidden"===b[a].type&&(b[a].value=c)},r=function(b,a,c){var d=null,f;f=l.hostname;var g=l.protocol,h="webevents/"+b;if(t){if(e(k)&&(a._mchId=k.id,a._mchTk=k.token,e(i.mkt_tok)&&(a.mkt_tok=i.mkt_tok),e(i.wsInfo)&&(a._mchWs=i.wsInfo),"clickLink"===b&&(a._mchCn=e(i.customName)?i.customName:
""),a._mchHo=f,a._mchPo=l.port,e(a._mchRu)||(a._mchRu=n(l.pathname)),a._mchPc=g,a._mchVr="143",e(f)&&!(0===f.length||"file:"===g)))for(d in h+="?_mchNc="+(new Date).getTime(),E(i.notifyPrefix,h,a,c),i.altIds)i.altIds.hasOwnProperty(d)&&(f=i.altIds[d],a._mchId=f,E(i.notifyPrefix.replace(/\w{3}\-\w{3}\-\w{3}\.mktoresp\.com/i,f+".mktoresp.com"),h,a,c))}else u.push(["post",arguments])},G=function(b){var a=b||j.event,c=a.target||a.srcElement;b={};var d;d=a.which;var f=a.button;d=e(d)&&(1===d||2===d)||
e(f)&&(0===f||1===f||4===f)?!0:!1;if(d&&!a._mchDone){a._mchDone=!0;a=c;d=l.href||l;for(-1<d.indexOf("#")&&(d=d.substring(0,d.indexOf("#")));"A"!==a.tagName&&"AREA"!==a.tagName&&e(a.parentNode);)a=a.parentNode;a===h||a===j||"A"!==a.tagName&&"AREA"!==a.tagName?a=null:(c=a.href.replace(/^\s+|\s+$/g,""),a=e(c)&&0<c.length&&0!==c.indexOf("#")&&0!==c.indexOf(d+"#")&&0!==c.indexOf("javascript")&&0!==c.indexOf("mailto")&&!v(a,"mchNoDecorate")?a:null);e(a)&&(b._mchHr=n(a.href),r("clickLink",b))}return!0},
s=function(b){if(t){if(null!==k)return k;var a;a:{a=l.hostname;var c=i.domainLevel,d=a.split("."),f=d.length,g=2;if(e(c))g=c;else if(2<d[f-1].length)g=2;else if(2===d[f-1].length)g=3;else break a;for(;d.length>g&&2<d.length;)d.shift();a=d.join(".")}var j="_mkto_trk",d=h.cookie,c={id:null,token:null},j=q(j);c.store=function(a,b,c,d){var e=j+"="+y(this),f=new Date;0<a&&(f.setTime(f.getTime()+864E5*a),e+="; expires="+f.toGMTString());b&&(e+="; path="+b);c&&-1!==c.indexOf(".")&&(e+="; domain="+c);d&&
(e+="; secure");h.cookie=e};if(""!==d){d=d.split(";");for(f=0;f<d.length;f+=1)if(g=d[f].replace(/^\s+|\s+$/g,""),0===g.indexOf(j+"=")){d=g.substring(j.length+1);f=w(d);e(f.id)&&e(f.token)?z(c,f):z(c,w(d,":"));break}}return e(c.id)||i.cookieAnon||b?(c.id=A,e(c.token)||(c.token=e(i.visitorToken)&&"VISITOR_MKTTOK_REPLACE"!==i.visitorToken?i.visitorToken:"_mch-"+a+"-"+(new Date).getTime()+"-"+(Math.floor(9E4*Math.random())+1E4)),c.store(i.cookieLifeDays,"/",a,!1),k=c,F(),c):null}u.push(["createTrackingCookie",
arguments])},H=function(){s(!0)},O=function(b){var a=b.onclick;b.onclick="function"===typeof a?function(){H.apply(b,arguments);return a.apply(b,arguments)}:H},C={ASSOCIATE_LEAD:"associateLead",CLICK_LINK:"clickLink",VISIT_WEB_PAGE:"visitWebPage",init:function(b,a){if(N&&e(b)&&0!==b.length){A=b;var c="",d,f,g;d=x(j.location.toString());i.notifyPrefix=l.protocol+"//"+A+".mktoresp.com/";e(a)&&z(i,a);e(d)&&(e(d.mkt_tok)&&(i.mkt_tok=d.mkt_tok),e(d.lpview)&&(c=d.lpview));if(!e(i.mkt_tok))if(d=x(h.referrer),
e(d.mkt_tok))i.mkt_tok=d.mkt_tok;else if(e(d.enid)&&e(d.type))for(g in d)if(d.hasOwnProperty(g)&&("enid"!==g&&"type"!==g)&&(-1<g.indexOf("mkt_tok")||-1<d[g].indexOf("mkt_tok")))f=x(g+"="+d[g]),e(f.mkt_tok)&&(i.mkt_tok=f.mkt_tok);if(!("preview"===c&&/\/lpeditor\/preview$/.test(l.pathname))){if(!t){t=!0;c=s(e(i.mkt_tok));d={};for(f={};0<u.length;)switch(g=u.shift(),g[0]){case "createTrackingCookie":c=s.apply(h,g[1]);break;case "post":r.apply(h,g[1])}if(e(c))d._mchCn=e(i.customName)?i.customName:"",
f._mchHa=n(l.hash),f._mchRe=n(h.referrer),f._mchQp=n(l.search.substr(1).replace(/&/g,"__-__")),r("visitWebPage",d,f);else if(!i.cookieAnon&&(!e(j.Mkto)||!e(j.Mkto.formSubmit))){c=[];g=h.forms;d=g.length;var k,m,p;for(f=0;f<d;f+=1)if(v(g[f],"lpeRegForm")){m=g[f].elements;p=m.length;for(k=0;k<p;k+=1)"submit"===m[k].type&&!v(m[k],"mchNoDecorate")&&c.push(m[k])}for(g=0;g<c.length;g+=1)O(c[g])}}if(!0===i.loadSocial){var c=h.createElement("script"),q=!1,o;c.type="text/javascript";c.async=!0;c.src="http://marketo.com";
e(void 0)&&(o=function(){!1===q&&(q=!0,(void 0).call(j))},c.onreadystatechange=function(){("complete"===this.readyState||"loaded"===this.readyState)&&o()},c.onload=o);h.getElementsByTagName("head")[0].appendChild(c)}}}},munchkinFunction:function(b,a,c){var d={},f={},g=null;e(c)&&(d._mchKy=c);switch(b){case "associateLead":for(g in a)a.hasOwnProperty(g)&&(d["_mchAt"+g]=a[g]);s(!0);r("associateLead",d);break;case "clickLink":e(a.href)&&(d._mchHr=d._mchLr=n(a.href));r("clickLink",d);break;case "visitWebPage":e(a.url)&&
(d._mchRu=n(a.url)),e(a.params)&&(d._mchQp=n(a.params.replace(/&/g,"__-__"))),e(a.name)&&(d._mchCn=a.name),f._mchRe=n(l.href),r("visitWebPage",d,f)}},createTrackingCookie:function(b){s(b)}};Date.prototype.getTimeAlias=Date.prototype.getTime;m(j,"beforeunload",function(){for(var b;0<o.length;)b=o.shift(),M.apply(this,b);if(e(B)){do b=new Date;while(b.getTimeAlias()<B)}});m(h,"click",G,!0);var I=function(){F();var b=0;if(e(document.links))for(b=0;b<document.links.length;b+=1)m(document.links[b],"click",
G,!0)},J=!1,K=!0,L=h.documentElement,p=function(b){!("readystatechange"===b.type&&"complete"!==h.readyState)&&!J&&(J=!0,I.call(j,b.type||b))},D=null,D=function(){try{L.doScroll("left")}catch(b){setTimeout(D,50);return}p("poll")};if("complete"===h.readyState)I.call(j,"lazy");else{if(h.createEventObject&&L.doScroll){try{K=!j.frameElement}catch(P){}K&&D()}m(h,"DOMContentLoaded",p);m(h,"readystatechange",p);m(j,"load",p)}j.MunchkinTracker=j.Munchkin=C;j.mktoMunchkin=C.init;j.mktoMunchkinFunction=C.munchkinFunction}})(window);
